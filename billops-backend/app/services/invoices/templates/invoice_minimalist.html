<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Invoice {{ invoice.number }}</title>
  <style>
    * { margin: 0; padding: 0; }
    body { font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica Neue, sans-serif; color: #333; line-height: 1.6; }
    .container { width: 8.5in; height: 11in; padding: 0.5in; box-sizing: border-box; margin: 0 auto; }
    
    header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1in; border-bottom: 1px solid #e0e0e0; padding-bottom: 0.5in; }
    .company-name { font-size: 18px; font-weight: 300; letter-spacing: 1px; }
    .invoice-title { text-align: right; }
    .invoice-title h1 { font-size: 32px; font-weight: 300; margin-bottom: 0.25in; }
    .invoice-title p { font-size: 11px; color: #666; margin: 2px 0; }

    .details { display: grid; grid-template-columns: 1fr 1fr; gap: 0.5in; margin-bottom: 0.75in; }
    .detail-block { }
    .detail-block h3 { font-size: 10px; font-weight: 600; text-transform: uppercase; color: #999; margin-bottom: 0.15in; letter-spacing: 0.5px; }
    .detail-block p { font-size: 11px; margin: 4px 0; color: #333; }

    table { width: 100%; border-collapse: collapse; margin-bottom: 0.5in; }
    th { border-bottom: 2px solid #333; padding: 8px 0; text-align: left; font-weight: 600; font-size: 11px; }
    td { border-bottom: 1px solid #e0e0e0; padding: 8px 0; font-size: 11px; }
    .amount { text-align: right; }
    tfoot tr:first-child td { border-top: 2px solid #333; padding-top: 12px; }
    tfoot tr { border: none; }
    tfoot .total { font-weight: 600; }

    .notes { font-size: 10px; color: #666; margin-top: 0.5in; padding-top: 0.5in; border-top: 1px solid #e0e0e0; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="company-name">{{ company.name }}</div>
      <div class="invoice-title">
        <h1>Invoice</h1>
        <p>{{ invoice.number }}</p>
      </div>
    </header>

    <div class="details">
      <div class="detail-block">
        <h3>Bill To</h3>
        <p><strong>{{ client.name }}</strong></p>
        {% if client.contact_email %}<p>{{ client.contact_email }}</p>{% endif %}
      </div>
      <div class="detail-block">
        <h3>Invoice Details</h3>
        <p><strong>Date:</strong> {{ invoice.issue_date|format_date }}</p>
        {% if invoice.due_date %}<p><strong>Due:</strong> {{ invoice.due_date|format_date }}</p>{% endif %}
        <p><strong>Currency:</strong> {{ invoice.currency }}</p>
      </div>
    </div>

    <table>
      <thead>
        <tr>
          <th>Description</th>
          <th class="amount">Qty</th>
          <th class="amount">Unit Price</th>
          <th class="amount">Amount</th>
        </tr>
      </thead>
      <tbody>
        {% for item in items %}
        <tr>
          <td>{{ item.description }}</td>
          <td class="amount">{{ item.quantity }}</td>
          <td class="amount">{{ item.unit_price_cents|cents_to_currency(invoice.currency) }}</td>
          <td class="amount">{{ item.amount_cents|cents_to_currency(invoice.currency) }}</td>
        </tr>
        {% endfor %}
      </tbody>
      <tfoot>
        <tr>
          <td colspan="3" class="amount">Subtotal</td>
          <td class="amount">{{ subtotal_cents|cents_to_currency(invoice.currency) }}</td>
        </tr>
        {% if tax_cents > 0 %}
        <tr>
          <td colspan="3" class="amount">Tax</td>
          <td class="amount">{{ tax_cents|cents_to_currency(invoice.currency) }}</td>
        </tr>
        {% endif %}
        <tr class="total">
          <td colspan="3" class="amount">Total</td>
          <td class="amount">{{ total_cents|cents_to_currency(invoice.currency) }}</td>
        </tr>
      </tfoot>
    </table>

    {% if invoice.notes %}
    <div class="notes">
      <strong>Notes:</strong><br>{{ invoice.notes }}
    </div>
    {% endif %}

    <div class="notes" style="margin-top: 0.75in; border-top: none;">
      {% if company.address %}<p>{{ company.address }}</p>{% endif %}
      {% if company.email %}<p>{{ company.email }}</p>{% endif %}
    </div>
  </div>
</body>
</html>
